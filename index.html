<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>🚀 تتبع صفقات الحيتان</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
<style>
    body {
        background-color: #0d1117;
        color: #fff;
        font-family: 'Poppins', sans-serif;
        margin: 0;
        padding: 20px;
    }
    h1 {
        text-align: center;
        margin-bottom: 30px;
        color: #90caf9;
    }
    .grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
        gap: 20px;
    }
    .card {
        background: #161b22;
        border: 1px solid #30363d;
        border-radius: 15px;
        padding: 20px;
        box-shadow: 0 0 10px rgba(0,0,0,0.5);
        transition: transform 0.3s;
    }
    .card:hover {
        transform: translateY(-5px);
    }
    .buy {
        color: #00e676;
        font-weight: bold;
    }
    .sell {
        color: #ff1744;
        font-weight: bold;
    }
    .small {
        font-size: 14px;
        color: #aaa;
    }
    .no-trades {
        text-align: center;
        margin-top: 50px;
        font-size: 18px;
        color: #aaa;
    }
</style>
</head>
<body>
    <h1>🚀 تتبع صفقات الحيتان اللحظية</h1>
    <div id="trades" class="grid"></div>
    <div id="noTrades" class="no-trades" style="display: none;">لا توجد صفقات حيتان حالياً 🔎</div>

<script>
const excludedCoins = ['BTC', 'ETH', 'SOL', 'XRP'];
let allTrades = [];

async function fetchTrades() {
    try {
        const res = await fetch('https://webhook.site/your-real-webhook-url');
        if (!res.ok) throw new Error('فشل في الاتصال بالخادم');
        const data = await res.json();

        if (!data.trades) throw new Error('البيانات غير صحيحة');

        allTrades = data.trades
            .filter(trade => trade.amountUsd > 500000)
            .filter(trade => !excludedCoins.includes(trade.baseToken.symbol));

        renderTrades();

    } catch (error) {
        console.error('خطأ في جلب البيانات:', error);
    }
}

function timeSince(timestamp) {
    const seconds = Math.floor((Date.now() - new Date(timestamp * 1000).getTime()) / 1000);
    if (seconds < 60) return `${seconds} ثانية`;
    const minutes = Math.floor(seconds / 60);
    if (minutes < 60) return `${minutes} دقيقة`;
    const hours = Math.floor(minutes / 60);
    if (hours < 24) return `${hours} ساعة`;
    const days = Math.floor(hours / 24);
    return `${days} يوم`;
}

function renderTrades() {
    const container = document.getElementById('trades');
    container.innerHTML = '';

    if (allTrades.length === 0) {
        document.getElementById('noTrades').style.display = 'block';
        return;
    } else {
        document.getElementById('noTrades').style.display = 'none';
    }

    allTrades.forEach(trade => {
        const card = document.createElement('div');
        card.className = 'card';
        card.innerHTML = `
            <h2>${trade.baseToken.symbol}</h2>
            <p class="${trade.side === 'BUY' ? 'buy' : 'sell'}">
                ${trade.side === 'BUY' ? '🟢 شراء' : '🔴 بيع'}
            </p>
            <p>💰 ${Number(trade.amountUsd).toLocaleString()} $</p>
            <p class="small">⏰ ${timeSince(trade.blockTimestamp)} مضت</p>
            <p class="small">📈 السيولة: ${trade.liquidity?.usd ? Number(trade.liquidity.usd).toLocaleString() + ' $' : 'غير متوفر'}</p>
            <p class="small">🌐 ${trade.dexId || 'غير معروف'}</p>
        `;
        container.appendChild(card);
    });
}

fetchTrades();
setInterval(fetchTrades, 60000); // تحديث كل دقيقة
</script>
</body>
</html>
